module.exports=[48617,328,87532,45222,23312,22850,29113,47659,7367,a=>{"use strict";var b=a.i(42343);function c(a){return(0,b.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M96 256h320M96 176h320M96 336h320"},child:[]}]})(a)}function d(a){return(0,b.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(a)}function e(a){return(0,b.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(a)}a.s(["IoReorderThreeOutline",()=>c],48617),a.s(["MdEdit",()=>e,"MdLogout",()=>d],328);var f=a.i(87924),g=a.i(70106);let h=(0,g.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),i=(0,g.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>i],87532);let j=(0,g.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>j],45222);let k=(0,g.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);a.s(["Bell",()=>k],23312);let l=(0,g.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),m=(0,g.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),n=[{title:"Home",icon:(0,f.jsx)(h,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(h,{className:"text-blue-500",strokeWidth:2,fill:"rgba(59, 130, 246, 0.1)"}),gradient:"from-blue-400 to-blue-600",bgColor:"bg-blue-50",hoverBg:"hover:bg-blue-50/50"},{title:"Search",icon:(0,f.jsx)(i,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(i,{className:"text-indigo-500",strokeWidth:2,fill:"rgba(99, 102, 241, 0.1)"}),gradient:"from-indigo-400 to-indigo-600",bgColor:"bg-indigo-50",hoverBg:"hover:bg-indigo-50/50"},{title:"Message",icon:(0,f.jsx)(j,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(j,{className:"text-emerald-500",strokeWidth:2,fill:"rgba(16, 185, 129, 0.1)"}),gradient:"from-emerald-400 to-emerald-600",bgColor:"bg-emerald-50",hoverBg:"hover:bg-emerald-50/50"},{title:"Notification",icon:(0,f.jsx)(k,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(k,{className:"text-rose-500",strokeWidth:2,fill:"rgba(244, 63, 94, 0.1)"}),gradient:"from-rose-400 to-rose-600",bgColor:"bg-rose-50",hoverBg:"hover:bg-rose-50/50"},{title:"Create",icon:(0,f.jsx)(l,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(l,{className:"text-violet-500",strokeWidth:2,fill:"rgba(139, 92, 246, 0.1)"}),gradient:"from-violet-400 to-violet-600",bgColor:"bg-violet-50",hoverBg:"hover:bg-violet-50/50"},{title:"Profile",icon:(0,f.jsx)(m,{className:"text-gray-500",strokeWidth:1.5}),activeIcon:(0,f.jsx)(m,{className:"text-amber-500",strokeWidth:2,fill:"rgba(245, 158, 11, 0.1)"}),gradient:"from-amber-400 to-amber-600",bgColor:"bg-amber-50",hoverBg:"hover:bg-amber-50/50"}];a.s(["menuItems",0,n],22850);var o=a.i(33508);a.s(["default",0,({isOpen:a,onClose:b})=>a?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50",onClick:b}),(0,f.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:(0,f.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-scaleIn",children:[(0,f.jsxs)("div",{className:"relative pt-8 pb-4 px-6 bg-gradient-to-r from-sky-50 to-blue-50 border-b border-gray-100 text-center",children:[(0,f.jsx)("button",{onClick:b,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,f.jsx)(o.X,{size:20,className:"text-gray-500"})}),(0,f.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,f.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-red-100 to-orange-100 rounded-full flex items-center justify-center",children:(0,f.jsx)(d,{size:32,className:"text-red-500"})}),(0,f.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent",children:"Logged Out"})]})]}),(0,f.jsxs)("div",{className:"text-center py-8 px-6",children:[(0,f.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"You have been logged out successfully. Please sign in to continue using the app."}),(0,f.jsx)("div",{className:"mt-4 p-3 bg-sky-50 rounded-lg border border-sky-100",children:(0,f.jsxs)("p",{className:"text-sm text-gray-600",children:["ðŸ’¡ ",(0,f.jsx)("strong",{children:"Tip:"})," Remember to log out from shared devices for security."]})})]}),(0,f.jsx)("div",{className:"flex justify-center gap-3 pb-6 px-6 bg-gray-50 border-t border-gray-100 pt-4",children:(0,f.jsx)("button",{onClick:b,className:"px-8 py-2.5 bg-gradient-to-r from-sky-400 to-blue-500 text-white rounded-xl font-semibold hover:from-sky-500 hover:to-blue-600 hover:-translate-y-0.5 hover:shadow-lg active:scale-[0.98] transition-all duration-200",children:"Got it"})})]})})]}):null],29113);class p extends Error{}p.prototype.name="InvalidTokenError";var q=a.i(25940);a.s(["getUserDetails",0,()=>{let a=(0,q.getToken)();if(null!==a)try{return function(a,b){let c;if("string"!=typeof a)throw new p("Invalid token specified: must be a string");b||(b={});let d=+(!0!==b.header),e=a.split(".")[d];if("string"!=typeof e)throw new p(`Invalid token specified: missing part #${d+1}`);try{c=function(a){let b=a.replace(/-/g,"+").replace(/_/g,"/");switch(b.length%4){case 0:break;case 2:b+="==";break;case 3:b+="=";break;default:throw Error("base64 string is not of the correct length")}try{var c;return c=b,decodeURIComponent(atob(c).replace(/(.)/g,(a,b)=>{let c=b.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}catch(a){return atob(b)}}(e)}catch(a){throw new p(`Invalid token specified: invalid base64 for part #${d+1} (${a.message})`)}try{return JSON.parse(c)}catch(a){throw new p(`Invalid token specified: invalid json for part #${d+1} (${a.message})`)}}(a)}catch(a){console.log("Invalid token",a)}return null}],47659);var r=a.i(72131),s=a.i(83490),t=a.i(74248),u=a.i(2415);a.s(["useUnreadMessages",0,(a={})=>{let{autoRefresh:b=!0,refreshInterval:c=3e4}=a,[d,e]=(0,r.useState)(0),[f,g]=(0,r.useState)({}),[h,i]=(0,r.useState)(!1),{registerMessageCallbacks:j}=(0,t.useSocket)(),k=(0,r.useCallback)(async()=>{let a=(0,q.getToken)();if(!a)return void console.warn("âš ï¸ No token found, cannot fetch unread counts");i(!0);try{let b=await s.default.get(`${u.API_BASE_URL}/chat/conversations/my-conversations`,{headers:{Accept:"application/json",Authorization:`Bearer ${a}`}}),c=b.data?.result||[];if(0===c.length){e(0),g({}),i(!1);return}let d=c.map(async b=>{try{let c=await s.default.get(`${u.API_BASE_URL}/chat/conversations/${b.id}/unread-count`,{headers:{Accept:"application/json",Authorization:`Bearer ${a}`}});return{conversationId:b.id,count:c.data?.result||0}}catch(a){return console.error(`âŒ Error fetching unread for ${b.id}:`,a),{conversationId:b.id,count:0}}}),f=await Promise.all(d),h=0,j={};f.forEach(({conversationId:a,count:b})=>{h+=b,j[a]=b}),e(h),g(j),console.log("ðŸ“Š Unread counts updated:",{total:h,byConversation:j})}catch(a){console.error("âŒ Error fetching unread counts:",a)}finally{i(!1)}},[]),l=(0,r.useCallback)(async a=>{let b=(0,q.getToken)();if(b&&a)try{await s.default.put(`${u.API_BASE_URL}/chat/conversations/mark-as-read`,null,{params:{conversationId:a},headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${b}`}}),console.log(`âœ… Marked conversation ${a} as read`),g(b=>({...b,[a]:0})),e(b=>Math.max(0,b-(f[a]||0))),setTimeout(()=>{k()},500)}catch(a){console.error("âŒ Error marking as read:",a)}},[f,k]),m=(0,r.useCallback)(()=>{k()},[k]);return(0,r.useEffect)(()=>{k()},[k]),(0,r.useEffect)(()=>{if(!b)return;let a=setInterval(()=>{k()},c);return()=>clearInterval(a)},[b,c,k]),(0,r.useEffect)(()=>{j&&j({onMessageReceived:a=>{console.log("ðŸ“¨ New message received, updating unread count"),g(b=>({...b,[a.conversationId]:(b[a.conversationId]||0)+1})),e(a=>a+1),setTimeout(()=>{k()},500)},onMessageSent:()=>{console.log("âœ… Message sent, may need to refresh unread count"),setTimeout(()=>{k()},500)}})},[j,k]),{totalUnread:d,unreadByConversation:f,isLoading:h,refreshUnreadCount:m,markAsRead:l}}],7367)},36121,a=>{"use strict";var b=a.i(83490),c=a.i(2415),d=a.i(25940);let e=b.default.create({baseURL:c.API_BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json"}});e.interceptors.request.use(a=>{let b=(0,d.getToken)();return b&&a.headers&&(a.headers.Authorization=`Bearer ${b}`),a},a=>Promise.reject(a)),e.interceptors.response.use(a=>a,a=>{if(a.response){let{status:b}=a.response;401===b&&(0,d.removeToken)()}return Promise.reject(a)}),a.s(["default",0,e])},47410,43678,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48617),e=a.i(328),f=a.i(22850),g=a.i(50944),h=a.i(29113),i=a.i(25940),j=a.i(47659),k=a.i(7367),l=a.i(36121);let m=async()=>{let a=await l.default.get("/profile/users/myInfo");if(a.data?.code!==1e3)throw Error(a.data?.message||"Failed to fetch user info");return a.data?.result},n=async(a,b)=>{let c=await l.default.put(`/profile/users/${a}`,b);if(c.data?.code!==1e3)throw Error(c.data?.message||"Failed to update profile");return c.data?.result},o=async a=>{let b=await l.default.put(`/profile/users/follow/${a}`,{});return b.data?.result},p=async a=>{let b=await l.default.put(`/profile/users/unfollow/${a}`,{});return b.data?.result},q=async a=>{let b=await l.default.post("/profile/users/search",{keyword:a});return b.data?.result||[]},r=async a=>{let b=await l.default.get(`/profile/users/${a}`);if(b.data?.code!==1e3)throw Error(b.data?.message||"Failed to fetch profile");return b.data?.result},s=async a=>{let b=await l.default.get(`/profile/users/follower/${a}`);return b.data?.result||[]},t=async a=>{let b=await l.default.get(`/profile/users/following/${a}`);return b.data?.result||[]};a.s(["fetchUserInfo",0,m,"fetchUserProfileById",0,r,"followUser",0,o,"getFollowers",0,s,"getFollowings",0,t,"searchUsersByUserName",0,q,"unfollowUser",0,p,"updateUserProfile",0,n],43678);let u=async()=>{(0,i.removeToken)()};var v=a.i(6704);a.s(["SidebarComponent",0,({onPostCreate:a=()=>{}})=>{let[l,n]=(0,c.useState)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y=(0,g.useRouter)(),z=(0,g.usePathname)(),{totalUnread:A}=(0,k.useUnreadMessages)({autoRefresh:!0,refreshInterval:3e4});(0,c.useEffect)(()=>{(async()=>{if((0,i.getToken)()&&(0,j.getUserDetails)())try{let a=await m();x(a)}catch(a){console.error("Error:",a)}})()},[]),(0,c.useEffect)(()=>{"/"===z?n("Home"):"/profile"===z?n("Profile"):"/message"===z?n("Message"):"/notification"===z?n("Notification"):"/search"===z&&n("Search")},[z]);let B=async a=>{try{a.preventDefault(),await u(),(0,i.removeToken)(),v.default.success("Logout successful!"),y.push("/login")}catch(a){v.default.error(a.message)}};return(0,b.jsxs)("div",{className:"flex h-screen w-full overflow-hidden",children:[(0,b.jsxs)("div",{className:"w-64 fixed top-0 left-0 h-screen transition-all duration-300 flex flex-col justify-between px-4 py-6 bg-white border-r border-gray-200 shadow-sm z-50",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full blur-md opacity-20 group-hover:opacity-30 transition-opacity"}),(0,b.jsx)("img",{className:"relative w-16 h-16 rounded-full cursor-pointer hover:scale-105 transition-transform duration-200 shadow-lg",src:"/logo.webp",alt:"Logo",onClick:()=>y.push("/")})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto space-y-1",children:f.menuItems.map(a=>(0,b.jsxs)("div",{onClick:()=>(a=>{switch(n(a),a){case"Profile":y.push("/profile");break;case"Home":y.push("/");break;case"Create":t(!0);break;case"Message":y.push("/message");break;case"Notification":y.push("/notification");break;case"Search":y.push("/search")}})(a.title),className:`group relative flex items-center gap-4 py-3 px-4 rounded-xl cursor-pointer transition-all duration-200 ${l===a.title?"bg-gradient-to-r from-sky-50 to-blue-50 text-sky-600":"hover:bg-gray-50 text-gray-700"}`,children:["Profile"===a.title&&w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`absolute inset-0 rounded-full blur-sm transition-opacity ${l===a.title?"bg-gradient-to-br from-sky-400 to-blue-500 opacity-20":"bg-gray-400 opacity-0 group-hover:opacity-10"}`}),(0,b.jsx)("img",{src:w.imageUrl||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"avatar",className:"relative w-7 h-7 rounded-full object-cover border-2 border-white shadow-sm"})]}),(0,b.jsxs)("span",{className:`font-medium text-sm ${l===a.title?"font-semibold":""}`,children:[w.firstName," ",w.lastName]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:`relative text-xl transition-transform duration-200 ${l===a.title?"scale-110":"group-hover:scale-105"}`,children:[l===a.title?a.activeIcon:a.icon,"Message"===a.title&&A>0&&(0,b.jsx)("div",{className:"absolute -top-2 -right-2 min-w-[18px] h-[18px] flex items-center justify-center bg-gradient-to-r from-red-500 to-pink-500 text-white text-[10px] font-bold rounded-full border-2 border-white shadow-lg animate-pulse",children:A>99?"99+":A})]}),(0,b.jsx)("span",{className:`font-medium text-sm flex items-center gap-2 ${l===a.title?"font-semibold":""}`,children:a.title})]}),l===a.title&&(0,b.jsx)("div",{className:"absolute left-0 w-1 h-8 bg-gradient-to-b from-sky-400 to-blue-500 rounded-r-full"})]},a.title))}),(0,b.jsxs)("div",{className:"relative mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 py-3 px-4 rounded-xl hover:bg-gray-50 cursor-pointer transition-all duration-200 text-gray-700 group",onClick:()=>p(!o),children:[(0,b.jsx)(d.IoReorderThreeOutline,{className:"text-2xl group-hover:scale-105 transition-transform"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"More"})]}),o&&(0,b.jsx)("div",{className:"absolute bottom-16 left-0 right-0 mx-2 bg-white shadow-xl border border-gray-100 rounded-xl overflow-hidden animate-scaleIn",children:(0,b.jsxs)("button",{onClick:B,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-left hover:bg-red-50 transition-colors group",children:[(0,b.jsx)(e.MdLogout,{className:"text-lg text-gray-600 group-hover:text-red-500 transition-colors"}),(0,b.jsx)("span",{className:"font-medium text-gray-700 group-hover:text-red-600",children:"Log Out"})]})})]})]}),(0,b.jsx)(h.default,{isOpen:q,onClose:()=>r(!1)})]})}],47410)}];

//# sourceMappingURL=_d454d231._.js.map