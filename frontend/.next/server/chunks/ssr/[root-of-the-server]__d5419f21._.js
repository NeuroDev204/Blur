module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},42343,a=>{"use strict";var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}a.s(["GenIcon",()=>i],42343)},63135,a=>{"use strict";var b=a.i(36121);let c=async()=>{let a=await b.default.get("/post/my-posts");if(a.data?.code!==1e3)throw Error(`Fetch error: ${a.data?.code}`);return a.data?.result},d=async(a=1,c=5)=>{try{let d=await b.default.get("/post/all",{params:{page:a,limit:c}});if(d.data?.code!==1e3)throw Error(`Fetch error: ${d.data?.code}`);let e=d.data?.result,f=[];Array.isArray(e)?f=e:e&&"object"==typeof e&&(f=e.content||e.data||e.posts||[]);let g=f.length>=c;return{posts:f,hasNextPage:g}}catch{return{posts:[],hasNextPage:!1}}},e=async a=>{try{let c=await b.default.get(`/post/users/posts/${a}`);if(c.data?.code!==1e3)throw Error(`Fetch user posts error: ${c.data?.code}`);return c.data?.result||[]}catch{return[]}};a.s(["fetchAllPost",0,d,"fetchUserPosts",0,c,"getPostsByUserId",0,e])},40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(47410);let f=()=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 animate-pulse",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded-xl mb-4"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"}),(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"}),(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]}),g=()=>(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 animate-pulse",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-12"})]});var h=a.i(63135),i=a.i(43678),j=a.i(36121);let k=async()=>{try{return((await j.default.get("/stories/all")).data.result||[]).map(a=>({...a,id:a.id,media:a.mediaUrl,username:`${a.firstName} ${a.lastName}`}))}catch{return[]}};var l=a.i(25940);function m(){let a,j,[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(1),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),E=(0,c.useRef)(null),F=(0,d.useRouter)();(0,c.useEffect)(()=>{},[F]),(0,c.useEffect)(()=>{},[]);let G=(0,c.useCallback)(async()=>{try{r(!0);let[a,b]=await Promise.all([(0,i.fetchUserInfo)(),k()]);p(a),t(b||[])}catch(a){console.error("Error fetching user/stories:",a)}finally{r(!1)}},[]);return(0,c.useCallback)(async()=>{if(!C&&A){D(!0);try{let a=await (0,h.fetchAllPost)(y,5),b=Array.isArray(a.posts)?a.posts:[],c=a.hasNextPage,d=b.map(a=>({...a,id:a.id,createdAt:a.createdAt||new Date().toISOString()}));n(a=>{let b;return b=new Map,a.forEach(a=>{let c=a.id||"";b.set(c,a)}),d.forEach(a=>{let c=a.id||"";b.set(c,a)}),Array.from(b.values()).sort((a,b)=>{let c=new Date(a.createdAt||0).getTime();return new Date(b.createdAt||0).getTime()-c})}),d.length>0&&z(a=>a+1),B(!!(c&&d.length>0))}catch(a){console.error("Error loading posts:",a)}finally{D(!1)}}},[y,A,C]),(0,c.useEffect)(()=>{(0,l.getToken)()&&(G(),(async()=>{D(!0);try{let a=await (0,h.fetchAllPost)(1,5),b=Array.isArray(a.posts)?a.posts:[],c=a.hasNextPage,d=b.map(a=>({...a,id:a.id,createdAt:a.createdAt||new Date().toISOString()}));n(d),z(2),B(!!(c&&d.length>0))}catch(a){console.error("Error loading first page:",a)}finally{D(!1)}})())},[G]),(0,b.jsxs)("div",{className:"flex min-h-screen",children:[u&&(0,b.jsx)("button",{onClick:()=>x(!w),className:"fixed top-4 left-4 z-50 p-2 bg-white rounded-md shadow-md border md:hidden","aria-label":"Toggle menu",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w?(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),u&&w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>x(!1)}),(0,b.jsx)("div",{className:"hidden md:block w-[240px] h-screen bg-white border-r flex-shrink-0",children:(0,b.jsx)(e.SidebarComponent,{})}),(0,b.jsx)("div",{className:`
                    md:hidden fixed top-0 left-0 w-64 h-screen bg-white border-r z-50
                    transition-transform duration-300 ease-in-out
                    ${w?"translate-x-0":"-translate-x-full"}
                `,children:(0,b.jsx)(e.SidebarComponent,{})}),(0,b.jsx)("div",{className:`flex-1 min-h-screen w-full max-w-full overflow-x-hidden ${u?"pt-16 px-4":"pl-3"}`,children:(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:(0,b.jsx)("div",{className:"flex justify-center w-full px-4 xl:px-0 py-6",children:(0,b.jsxs)("div",{className:"w-full max-w-[620px]",children:[(a={},Array.isArray(s)&&s.length>0&&s.forEach(b=>{b.authorId&&(a[b.authorId]||(a[b.authorId]=[]),a[b.authorId].push(b))}),j=Object.keys(a).map(b=>{let c=a[b];return c.sort((a,b)=>{let c=a.timestamp||a.createdAt||"";return new Date(b.timestamp||b.createdAt||"").getTime()-new Date(c).getTime()}),{authorId:b,stories:c,representativeStory:c[0]}}),(0,b.jsx)("div",{className:"storyDiv bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex space-x-3 overflow-x-auto pb-2 scrollbar-hide",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-sky-400 to-blue-500 flex items-center justify-center text-white text-2xl",children:"+"}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Add Story"})]}),q?Array.from({length:5}).map((a,c)=>(0,b.jsx)(g,{},`skeleton-${c}`)):j.map(a=>(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-orange-400 p-0.5",children:(0,b.jsx)("img",{src:a.representativeStory.mediaUrl||"/default-avatar.png",alt:"Story",className:"w-full h-full rounded-full object-cover border-2 border-white"})}),(0,b.jsx)("span",{className:"text-xs text-gray-600 truncate max-w-16",children:a.representativeStory.firstName||"User"})]},`story-${a.authorId}`))]})})),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:o?.imageUrl||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"Your avatar",className:"w-12 h-12 rounded-full object-cover border-2 border-sky-200"}),(0,b.jsxs)("button",{className:"flex-1 text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-full text-gray-500 transition-colors duration-200",children:["What's on your mind, ",o?.firstName||"there","?"]})]})}),(0,b.jsxs)("div",{className:"space-y-6 w-full",children:[q?Array.from({length:3}).map((a,c)=>(0,b.jsx)(f,{},`post-skeleton-${c}`)):m.length>0?(0,b.jsxs)(b.Fragment,{children:[m.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("img",{src:a.userImageUrl||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",alt:"avatar",className:"w-12 h-12 rounded-full object-cover border-2 border-sky-200"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-800",children:[a.firstName," ",a.lastName]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.createdAt?new Date(a.createdAt).toLocaleString():""})]})]}),a.content&&(0,b.jsx)("p",{className:"text-gray-700 mb-4",children:a.content}),a.mediaUrls&&a.mediaUrls.length>0&&(0,b.jsx)("div",{className:"rounded-xl overflow-hidden mb-4",children:(0,b.jsx)("img",{src:a.mediaUrls[0],alt:"Post media",className:"w-full h-auto object-cover"})}),(0,b.jsxs)("div",{className:"flex gap-4 pt-2 border-t border-gray-100",children:[(0,b.jsxs)("button",{className:"flex items-center gap-2 text-gray-600 hover:text-red-500 transition-colors",children:["â¤ï¸ ",a.likeCount||0]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 text-gray-600 hover:text-blue-500 transition-colors",children:["ðŸ’¬ ",a.commentCount||0]})]})]},a.id)),(0,b.jsx)("div",{ref:E,style:{height:1}})]}):(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center",children:[(0,b.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-sky-100 to-blue-100 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-12 h-12 text-sky-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No posts yet"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Start sharing your moments with friends!"})]}),C&&(0,b.jsx)("div",{className:"text-center text-gray-500 py-4",children:"Äang táº£i thÃªm..."}),!A&&m.length>0&&(0,b.jsx)("div",{className:"text-center text-gray-400 py-4",children:"Báº¡n Ä‘Ã£ xem háº¿t bÃ i viáº¿t"})]})]})})})})]})}a.s(["default",()=>m],40777)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d5419f21._.js.map